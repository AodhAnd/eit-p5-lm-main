<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>SDcard: (x86)_Arduino_libraries_krnl_README README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDcard
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">(x86)_Arduino_libraries_krnl_README README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>&gt;&gt;&gt; KRNL - a small preemptive kernel for small systems &lt;&lt;&lt;</p>
<p>I have found it interesting to develop an open source realtime kernel</p>
<p>for the Arduino platform - but is also portable to other platforms</p>
<ul>
<li>SEE SOME NOTES BELOW ABOUT TIMERS AND PINS</li>
<li>Now doxygen docu at html directory :-)</li>
<li>See <a class="el" href="krnl_8h.html">krnl.h</a> for further comments</li>
<li>- timers</li>
<li>- 8/16 MHz setting</li>
<li>- etc</li>
</ul>
<h2>Some highlights </h2>
<ul>
<li>open source (beer license)</li>
<li>well suited for teaching<ul>
<li>easy to read and understand source</li>
<li>priority to straight code instead insane optimization(which will make it nearly unreadable)</li>
</ul>
</li>
<li>well suited for serious duties - but with no warranty what so ever - only use it at own risk !!!</li>
<li>easy to use<ul>
<li>just import library krnl and you are ready</li>
</ul>
</li>
<li>automatic recognition of Arduino architeture<ul>
<li>supports all atmega variants I have had available (168,328,1280,2560 - uno, duemillanove, mega 1280 and 2560) Some characteristics:</li>
</ul>
</li>
<li>preemptive scheduling<ul>
<li>Basic heart beat at 1 kHz. SNOT can have heeartbeat in quants of milli seconds</li>
<li>static priority scheme</li>
</ul>
</li>
<li>support task, semaphores, message queues<ul>
<li>All elements shall be allocated prior to start of KRNL</li>
</ul>
</li>
<li>support user ISRs and external interrupts</li>
<li>timers<ul>
<li>krnl can be configures to use tmr 1,2 and for mega also 3,4,5 for running krnl tick</li>
<li>For timer 0 you should take care of millis and it will require some modifications in arduino lib</li>
<li>see <a class="el" href="krnl_8h.html">krnl.h</a> for implications (like</li>
</ul>
</li>
<li>Accuracy<ul>
<li>8 bit timers (0,2) 1 millisecond is 15.625 countdown on timer<ul>
<li>example 10 msec 156 instead of 156.25 so an error of 0.25/156.25 ~= 0.2%</li>
</ul>
</li>
<li>16 bit timers count down is 1 millisecond for 62.5 count</li>
<li>- example 10 msec ~ 625 countdown == precise :-)</li>
</ul>
</li>
</ul>
<p>See in <a class="el" href="krnl_8h.html">krnl.h</a> for information like ...</p>
<p>... from <a href="http://blog.oscarliang.net/arduino-timer-and-interrupt-tutorial/">http://blog.oscarliang.net/arduino-timer-and-interrupt-tutorial/</a> Timer0:</p><ul>
<li>Timer0 and 2 is a 8bit timer.</li>
<li>In the Arduino world Timer0 is been used for the timer functions, like delay(), millis() and micros().</li>
<li>If you change Timer0 registers, this may influence the Arduino timer function.</li>
<li>So you should know what you are doing.</li>
</ul>
<p>Timer1:</p><ul>
<li>Timer1 is a 16bit timer.</li>
<li>In the Arduino world the Servo library uses Timer1 on Arduino Uno (Timer5 on Arduino Mega).</li>
</ul>
<p>Timer2:</p><ul>
<li>Timer2 is a 8bit timer like Timer0.</li>
<li>In the Arduino work the tone() function uses Timer2.</li>
</ul>
<p>Timer3, Timer4, Timer5: Timer 3,4,5 are only available on Arduino Mega boards.</p><ul>
<li>These timers are all 16bit timers.</li>
</ul>
<p>Install from github:</p>
<p>1) cd whatever/sketchbook/libraries - see Preferences for path to sketchbook 2) git clone <a href="https://github.com/jdn-aau/krnl.git">https://github.com/jdn-aau/krnl.git</a></p>
<p>NB NB NB - TIMER HEARTBEAT From vrs 1236 you can change which timer to use in <a class="el" href="krnl_8c.html">krnl.c</a> Just look in top of file for KRNLTMR</p><ul>
<li>tested with uno and mega 256</li>
</ul>
<p>In <a class="el" href="krnl_8c.html">krnl.c</a> you can configure KRNL to use timer (0),1,2,3,4 or 5. (3,4,5 only for 1280/2560 mega variants)</p>
<p>You can select heartbeat between 1 and 200 milliseconds in 1 msec steps.</p>
<ul>
<li>Timer0 - An 8 bit timer used by Arduino functions delay(), millis() and micros(). BEWARE</li>
<li>Timer1 - A 16 bit timer used by the Servo() library</li>
<li>Timer2 - An 8 bit timer used by the Tone() library</li>
<li>Timer3,4,5 16 bits</li>
</ul>
<p>... from <a href="http://arduino-info.wikispaces.com/Timers-Arduino">http://arduino-info.wikispaces.com/Timers-Arduino</a></p>
<ul>
<li>Servo Library uses Timer1.</li>
<li>- You can’t use PWM on Pin 9, 10 when you use the Servo Library on an Arduino.</li>
<li>- For Arduino Mega it is a bit more difficult. The timer needed depends on the number of servos.</li>
<li>- Each timer can handle 12 servos.</li>
<li>- For the first 12 servos timer 5 will be used (losing PWM on Pin 44,45,46).</li>
<li>- For 24 Servos timer 5 and 1 will be used (losing PWM on Pin 11,12,44,45,46)..</li>
<li>- For 36 servos timer 5, 1 and 3 will be used (losing PWM on Pin 2,3,5,11,12,44,45,46)..</li>
<li>- For 48 servos all 16bit timers 5,1,3 and 4 will be used (losing all PWM pins).</li>
<li>Pin 11 has shared functionality PWM and MOSI.</li>
<li>- MOSI is needed for the SPI interface, You can’t use PWM on Pin 11 and the SPI interface at the same time on Arduino.</li>
<li>- On the Arduino Mega the SPI pins are on different pins.</li>
<li>tone() function uses at least timer2.</li>
<li>- You can’t use PWM on Pin 3,11 when you use the tone() function an Arduino and Pin 9,10 on Arduino Mega.</li>
</ul>
<p>(c)</p><ul>
<li>"THE BEER-WARE LICENSE" (frit efter PHK) *<ul>
<li><a href="#" onclick="location.href='mai'+'lto:'+'jdn'+'@e'+'s.a'+'au'+'.dk'; return false;">jdn@e<span style="display: none;">.nosp@m.</span>s.aa<span style="display: none;">.nosp@m.</span>u.dk</a> wrote this file. As long as you *</li>
<li>retain this notice you can do whatever you want *</li>
<li>with this stuff. If we meet some day, and you think*</li>
<li>this stuff is worth it ... *</li>
<li>you can buy me a beer in return :-) *</li>
<li>or if you are real happy then ... *</li>
<li>single malt will be well received :-) *</li>
<li>*</li>
<li>Use it at your own risk - no warranty</li>
</ul>
</li>
</ul>
<p>Happy hacking</p>
<p>See also <a href="http://es.aau.dk/staff/jdn/edu/doc/arduino/krnl">http://es.aau.dk/staff/jdn/edu/doc/arduino/krnl</a></p>
<p>/Jens </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
